---
title: "Untitled"
output: md_document
date: "2025-10-27"
---

* Annika
* Maike
* Anastasiya
* Henrik 
* Marie 

```{r, include=FALSE}

knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(plotrix)
library(jmv)
library(ggplot2)
library(AachenColorPalette)
df <- readRDS("data/data.rds")
rwthcolor <- hcictools::rwth.colorpalette()

```


## Forschungsfrage
"Welche Faktoren beeinflussen die Nutzungsbereitschaft von innovativen Services der Kommunalverwaltung bei Weitergabe der Daten an private oder öffentliche Träger?"

## Faktorenraum

![Faktorenraum](Faktorenraum.jpg)


## Validierte Messinstrumente


[Digital literacy](https://zis.gesis.org/skala/Schauffel-Schmidt-Peiffer-Ellwart-ICT-Self-Concept-Scale-%28ICT-SC25%29?redirect_url=https%253A%252F%252Fzis.gesis.org%252Fsearch%253Fsource%253D%257B%2522query%2522%253A%257B%2522bool%2522%253A%257B%2522must%2522%253A%255B%257B%2522query_string%2522%253A%257B%2522query%2522%253A%2522digital%2520literacy%2522%252C%2522default_operator%2522%253A%2522AND%2522%257D%257D%255D%252C%2522filter%2522%253A%255B%257B%2522term%2522%253A%257B%2522type%2522%253A%2522zis_scales%2522%257D%257D%255D%257D%257D%257D&lang=de)  

<!-- #"General" also I1-5 bleiben drin. "Communicate": I7, I9 raus. "Proccess and Store": I12 weg. "Generate Content": I15, I17 raus. "Safe application": I18 raus. "Solve problems": I23, I25 raus.   -->
  
Items, die nicht die Nutzung von digitalen Services der Kommunalverwaltung beeinflussen, wurden herausgekürzt. Dies umfasst hauptsächlich kooperative und generative Szenarien, die wir im Anwendungsfall nicht antizipieren. Die Skala wurde von 25 Items auf 18 Items gekürzt. Es wurde darauf geachtet, dass die Subskalen genug Substanz (mindestens 3 Items) - und damit ihre Funktionalität behalten.

## Demografie
### Histogramm Altersverteilung

```{r, echo=FALSE}

ggplot(df) +
  aes(x = Age) +
  geom_histogram(bins = 30L, fill = aachen_color("purple75")) +
  geom_vline(xintercept = mean(df$Age, na.rm = TRUE)) +
  geom_text(x = mean(df$Age, na.rm = TRUE), y = 50, label = paste0("M = ", round(mean(df$Age, na.rm = TRUE), 2)), angle = 90 , vjust = 1.5) +
  labs(x = "Alter in Jahren", 
       y = "Anzahl", 
       title = paste0("Altersverteiliung n = (", nrow(df), ")"), 
       subtitle = "Histogramm der Altersverteilung", 
       caption = "30 Bins") +
  theme_minimal()


```

### Demografische Daten
```{r}
df$urban2 <- as.factor(df$Urban)
jmv::descriptives(df, vars=c("Gender", "Age", "Edu", "urban2"), freq = TRUE)
```

## Hypothesen

### Unterschiedshypothesen
1) Männer und Frauen unterscheiden sich in der Nutzungsbereitschaft in Szenario A (öffentlicher Dienst).

```{r, echo = FALSE}
df_male <- filter(df, df$Gender == "Männlich")
df_female <- filter(df, df$Gender == "Weiblich")
t.test(df_male$SzOeff, df_female$SzOeff)
```
```{r, echo = FALSE}

df %>% 
  filter(!is.na(Gender)) %>% 
  droplevels() %>% 
  group_by(Gender) %>% 
  summarise(mean_SzOeff = mean(SzOeff)-1, sem_SzOeff = std.error(SzOeff)) %>%
  ggplot() +
  aes(x = Gender, fill = Gender, weight = mean_SzOeff, ymin = mean_SzOeff - sem_SzOeff, ymax = mean_SzOeff + sem_SzOeff ) +
  geom_bar( width = 0.5) +
  scale_fill_manual(values=c(rwthcolor$lightblue, rwthcolor$red)) + 
  geom_errorbar(width = 0.2) +
  ylim(0,6) +
  theme_minimal() +
  labs(title = "Männer zeigen eine höhere Nutzungsbereitschaft für Szenario A", 
       subtitle = "Balkendiagramm: Nutzungsbereitschaft Szenario A im Vergleich zwischen Männern und Frauen", 
       x = "Geschlecht",
       y = "Nutzungsbereitschaft Szenario A (öffentlicher Dienst) [0 - 5]",
       fill = "Geschlecht",
       caption = "Fehlerbalken zeigen Standardfehler des Mittelwertes") +
  NULL

```

2) Männer und Frauen unterscheiden sich in der Nutzungsbereitschaft in Szenario B (privatwirtschaftliche Zwecke).
```{r, echo = FALSE}
t.test(df_male$SzPriv, df_female$SzPriv)
```
```{r, echo= FALSE}

df %>%
  filter(!is.na(Gender)) %>% 
  droplevels() %>%
  group_by(Gender) %>% 
  summarise(mean_SzPriv = mean(SzPriv)-1, sem_SzPriv = std.error(SzPriv)) %>%
  ggplot() +
  aes(x = Gender, fill = Gender, weight = mean_SzPriv, ymin = mean_SzPriv - sem_SzPriv, ymax = mean_SzPriv + sem_SzPriv ) +
  geom_bar(width = 0.5) +
  scale_fill_manual(values=c(rwthcolor$lightblue, rwthcolor$red)) + 
  geom_errorbar(width = 0.2) +
  ylim(0,6) +
  theme_minimal() +
  labs(title = "Männer zeigen eine höhere Nutzungsbereitschaft für Szenario B", 
       subtitle = "Balkendiagramm: Nutzungsbereitschaft Szenario A im Vergleich zwischen Männern und Frauen ", 
       x = "Geschlecht",
       y = "Nutzungsbereitschaft Szenario B (privatwirtschaftlich) [0 - 5]",
       fill = "Geschlecht",
       caption = "Fehlerbalken zeigen Standardfehler des Mittelwertes") +
  NULL
```

3) Die Nutzungsbereitschaft ist bei Szenario A (öffentlicher Dienst) höher, als bei Szenario B (privatwirtschaftliche Zwecke). 
```{r, echo = FALSE}
t.test(df$SzOeff, df$SzPriv, paired = TRUE)
```
```{r, echo = FALSE}
library(tidyverse)

df_WAP <- df %>%
  select(SzOeff, SzPriv) %>%
  pivot_longer(
    cols = c(SzOeff, SzPriv),
    names_to = "Szenario",
    values_to = "Nutzungsbereitschaft")

df_WAP$Szenario %>% 
  recode(`1` = "SzOeff", `2` = "SzPriv") %>% 
  as.factor() -> df_WAP$Szenario

#Feedback JRH: Diagramm prinzipiell super, ich würde aber für den Vortrag Balken- und Punktdiagramm nicht abwechseln. 

df_WAP%>%
  group_by(Szenario) %>% 
  summarise(mean_Nutzungsbereitschaft = mean(Nutzungsbereitschaft), sem_Nutzungsbereitschaft = std.error(Nutzungsbereitschaft)) %>%
  ggplot() +
  aes(x = Szenario, weight = (mean_Nutzungsbereitschaft - 1), fill = Szenario, ymin = (mean_Nutzungsbereitschaft -1) - sem_Nutzungsbereitschaft, ymax = (mean_Nutzungsbereitschaft -1) + sem_Nutzungsbereitschaft) +
   geom_bar(width = 0.5) +
  scale_fill_manual(values=c(rwthcolor$lightblue, rwthcolor$red))+ 
  ylim(0, 5) +
   geom_errorbar(width = 0.2, colour = rwthcolor$black) +
  theme_minimal() +
  labs(title = "Die Nutzungsbereitschaft für Szenario A ist höher als für das Szenario B", 
       subtitle = "Unterschiede der Nutzungsbereitschaft für KI-Services, wenn die erhobenen Daten vom Öffentlichen Dienst oder der Privatwirtschaft genutzt werden", 
       x = "Szenario",
       y = "Nutzungsbereitschaft [1 - 6]",
       fill = "Szenario",
       caption = "Fehlerbalken zeigen Standardfehler des Mittelwertes") +
  NULL
```



#### Unterschiedshypothese für MANOVA
1) LandbewohnerInnen und StadtbewohnerInnen unterscheiden sich in der Nutzungsbereitschaft in Szenario A (öffentlicher Dienst) und Szenario B (privatwirtschaftliche Zwecke).

```{r, echo = FALSE}
 
df_HA <- df %>%
  mutate(Urban = factor(Urban, levels = c("1","2","3"))) %>%
  droplevels()

jmv::mancova(
  data    = df_HA,
  deps    = c("SzOeff", "SzPriv"),
  factors = "Urban",
  multivar = "wilks"
)

```


### Zusammenhangshypothesen
1) Es gibt einen Zusammenhang zwischen Digital Literacy und  Nutzungsbereitschaft in Szenario A (öffentlicher Dienst).
```{r, echo = FALSE}
cor.test(df$DigLit, df$SzOeff)
```
```{r, echo = FALSE}
ggplot(df) +
  aes(x = DigLit, y = SzOeff) +
    geom_jitter(shape = "circle", size = 1.5, colour = rwthcolor$turquois, width = 0.2, height = 0.2, alpha = 0.5) +
  geom_smooth(method = "lm", color = rwthcolor$lightblue) +
  labs(x = "Digital Literacy", 
       y = "Nutzungsbereitschaft für Szenario A (öffentlicher Dienst)", 
       title = "Zusammenhang Digital Literacy und Nutzungsbereitschaft Szenario A (öffentlicher Dienst)", 
       subtitle = "", 
       caption = "Schatten der Regressionsgraden zeigt 95% Konfidenzintervall. Jitter = 20%") +
  theme_minimal()

```

2) Es gibt einen Zusammenhang zwischen Digital Literacy und  Nutzungsbereitschaft in Szenario B (privatwirtschaftliche Zwecke).
```{r, echo = FALSE}
cor.test(df$DigLit, df$SzPriv)
```
```{r, echo = FALSE}
ggplot(df) +
  aes(x = DigLit, y = SzPriv) +
    geom_jitter(shape = "circle", size = 1.5, colour = rwthcolor$turquois, width = 0.2, height = 0.2, alpha = 0.5) +
  geom_smooth(method = "lm", color = rwthcolor$lightblue) +
  labs(x = "Digital Literacy", 
       y = "Nutzungsbereitschaft für Szenario B (private Dienste)", 
       title = "Zusammenhang Digital Literacy und Nutzungsbereitschaft Szenario B (privater Dienst)", 
       subtitle = "", 
       caption = "Schatten der Regressionsgraden zeigt 95% Konfidenzintervall. Jitter = 20%") +
  theme_minimal()

```

#### Zusammenhangshypothese für multiple lineare Regression
1) Die Nutzungsbereitschaft von innovativen Services der Kommunalverwaltung in Szenario B (privatwirtschaftliche Zwecke) ist abhängig von Privacy-Einstellungen und Alter.  
 


```{r, echo = FALSE}
jmv::linReg(data = df, 
            dep = c("SzPriv"), 
            covs = c("Priv", "Age"),
            blocks = c("Priv", "Age"),
            r2Adj = TRUE, stdEst = TRUE, modelTest = TRUE)
```
2) Die Nutzungsbereitschaft von innovativen Services der Kommunalverwaltung in Szenario A (öffentlicher Dienst Zwecke) ist abhängig von Privacy-Einstellungen und Alter. 
```{r, echo = FALSE}
jmv::linReg(data = df, 
            dep = c("SzOeff"), 
            covs = c("Priv", "Age"),
            blocks = c("Priv", "Age"),
            r2Adj = TRUE, stdEst = TRUE, modelTest = TRUE)
```


service comment (nur so 90 % garantie auf richtigkeit): adjusted R^2 stellt dar, wie viel Prozent der Varianz der abhängigen Variable (den Variablen) durch die unabhängige Variable erklärt wird. Diese Betrachtung geht über den Mittelwertsvergleich hinaus. Bsp.: die Varianz der Nutzungsbereitschaft wird zu x % von Privacy-EInstellungen erklärt. Das wird durch das "Estimate" berechnet. Sollen Variablen verglichen werden, müssen die Estimates bereinigt werden (da bspw. Alter immer höhere Werte hat als eine Skala), betrachtet man die "standadisierten Estimates". aus mehreren Variablen setzen sich Modelle zusammen. Das beste Modell hat die wenigsten Variablen und das größte stand. Estimate. Wir machen basically ein lineares Gleichungssystem mit den Variablen, um das Intercept zu berechnen. Das funktioniert nicht perfekt, daher kommt der Fehlerterm zustande.

## Operationalisierung
future text

## Poweranalyse  
![Power](power.jpg)  
  
antizipierte ProbandInnenanzahl: n=360  
wird für die Poweranalyse halbiert (Gruppenvergleich, daher wird die Gruppe geteilt)  
Signifikanzniveau (wir sind SozialwissenschaftlerInnen): $\alpha$ = 0,05  
Power (1-(4 · $\alpha$)): 0,8  
kleinste Effektstärke, die wir messen können (ausgerechnet): d=0.2961082  
Poweranalysen, um herauszufinden, wie viele ProbandInnen wir je nach antizipiertem Effekt brauchen.  
n(d=0.2; "schwach")=786.8114  
n(d=0.5; "mittel")=127.5312  
n(d=0.8; "hoch")=51.04916  


## Descriptives
```{r descriptive, echo = FALSE}
descriptives <- psych::describe(df)[c(41:45),c(3,4,8,9)]
descriptives$alpha <- c(0.85, 0.83, 0.95, 0.97, 0.97)
descriptives[,c(5,1:4)]
```


